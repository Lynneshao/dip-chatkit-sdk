paths:
  /app/{agent_id}/conversation:
    get:
      summary: 获取会话列表
      tags:
      - 会话管理
      parameters:
        - name: agent_id
          in: path
          required: true
          description: Agent ID。
          schema:
            type: string
        - $ref: ./agent-app.schemas.yaml#/components/parameters/pageOffset
        - $ref: ./agent-app.schemas.yaml#/components/parameters/pageLimit
      responses:
        '200':
          description: 会话列表获取成功
          content:
            application/json:
              schema:
                $ref: ./agent-app.schemas.yaml#/components/schemas/ConversationListResponse
    post:
      tags:
        - agent-app
      operationId: createConversation
      summary: 
        - 会话管理
      description: 创建 Data Agent 会话。
      parameters:
        - name: agent_id
          in: path
          required: true
          description: Agent ID。
          schema:
            type: string
        - name: Authorization
          in: header
          required: true
          description: 用户或应用账号的 Bearer token。
          schema:
            type: string
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: ./agent-app.schemas.yaml#/components/schemas/CreateConversationRequest
            example:
              agent_id: 01KAZKS30H0X0D8Z8K24FMRJK6
              agent_version: v1
              executor_version: v2
      responses:
        "200":
          description: 创建会话成功
          content:
            application/json:
              schema:
                $ref: ./agent-app.schemas.yaml#/components/schemas/ConversationResponse

  /app/{agent_id}/conversation/{conversation_id}:
    get:
      summary: 获取会话详情
      tags:
      - 会话管理
      parameters:
      - name: agent_id
        in: path
        required: true
        description: Agent ID。
        schema:
          type: string
      - name: conversation_id
        in: path
        schema:
          type: string
        required: true
        description: 会话 ID
      responses:
        '200':
          description: 会话获取成功
          content:
            application/json:
              schema:
                $ref: ./agent-app.schemas.yaml#/components/schemas/ConversationDetail
      
    delete:
      summary: 删除指定 ID 的会话
      tags:
        - 会话管理
      parameters:
        - name: agent_id
          in: path
          required: true
          description: Agent ID。
          schema:
            type: string
        - name: conversation_id
          in: path
          schema:
            type: string
          required: true
          description: 会话 ID
      responses:
        '204':
          description: 删除成功
                
  /app/{agent_id}/chat/completion:
    post:
      tags:
        - agent-app
      operationId: sendChatCompletion
      summary: 发送对话消息
      description: 调用 Data Agent 聊天接口，支持流式返回。
      parameters:
        - name: agent_id
          in: path
          required: true
          description: Agent ID。
          schema:
            type: string
        - name: Authorization
          in: header
          required: true
          description: 用户或应用账号的 Bearer token。
          schema:
            type: string
          example: Bearer ory_at_yhkn-kjRfYcivXUnMH9Rsdw4SzrkKSFFjNpglg06dRM.s1FWQ02zhWnS7NeKjupSGYmEXMzUa5XKp3RwS4BqZvg
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: ./agent-app.schemas.yaml#/components/schemas/ChatCompletionRequest
      responses:
        "200":
          description: 成功
          content:
            text/event-stream:
              itemSchema:
                $ref: ./agent-app.schemas.yaml#/components/schemas/EventMessage
  /app/{agent_id}/chat/termination:
    post:
      operationId: terminateConversation
      summary: 终止对话
      tags:
        - agent-app
      parameters:
        - name: agent_id
          in: path
          required: true
          description: Agent ID。
          schema:
            type: string
        - name: Authorization
          in: header
          required: true
          description: 用户或应用账号的 Bearer token。
          schema:
            type: string
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                conversation_id:
                  type: string
                  description: 会话 ID
              required:
              - conversation_id